(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{338:function(e,r,t){"use strict";t.r(r);t(12),t(53),t(56),t(21),t(20),t(16),t(142),t(44),t(89),t(41),t(139),t(25),t(26),t(85),t(23),t(86),t(11),t(24),t(54),t(57),t(17),t(48),t(29);var n=t(0),a=t.n(n),o=t(2),i=t.n(o),c={argosUrl:"https://www.argos.co.uk/recommendations-api?",tuUrl:"/products?productCodes=",sainsburysPeeriusURL:"sainsburys/rec/shown.pagex?ids=",productSkuTest:"100091405-Brown",productLimit:4,argosParams:function(e){return{channel:"pdp",placement:"alternatives",itemId:e}},tuParams:function(e){return{productCodes:e}},categories:[{id:"hycContainer",header:"You may also like"},{id:"rhcContainer",header:"We Recommend"}]},u=(t(42),t(37));function s(e,r,t,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void t(e)}c.done?r(u):Promise.resolve(u).then(n,a)}function l(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function i(e){s(o,n,a,i,c,"next",e)}function c(e){s(o,n,a,i,c,"throw",e)}i(void 0)}))}}function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach((function(r){d(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function d(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function p(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var y=function(e){var r=e.categories,t=e.productLimit,n=function(e){return r.find((function(r){return r.header===e}))},a=function(e){return e.filter((function(e){return n(e.alias)}))},o=function(e){var t=[];return r.forEach((function(r){var n=e.find((function(e){var t=e.alias;return r.header===t}));n&&t.push(n)})),t},i=function(e){return e.slice(0,t).map((function(e){return{id:e.id,refCode:e.refCode}}))},c=function(e){var r=[];return e.forEach((function(e){r.push.apply(r,p(e.recommendations.map((function(e){return e.refCode}))))})),r},s=function(r){var t="".concat(e.tuUrl).concat(r.join(","));return Object(u.a)(t).then((function(e){return e.data})).catch((function(){return[]}))},f=function(e,r){var t=[];return e.forEach((function(e){var n=[];e.recommendations.forEach((function(e){var t=r.find((function(r){return e.refCode===r.code}));t&&n.push(m({},e,{recommendedProduct:t}))})),t.push(m({},e,{recommendations:n}))})),t},d=function(){var e=l(regeneratorRuntime.mark((function e(r){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c(r),e.next=3,s(t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return{determineRecommendations:function(){var e=l(regeneratorRuntime.mark((function e(r){var t,c,u,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a(r),c=o(t),u=c.map((function(e){var r=n(e.alias);return{id:r.id,header:r.header,recommendations:i(e.recs)}})),e.next=5,d(u);case 5:return s=e.sent,l=f(u,s),e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}},g=function(e){var r=e.header;return a.a.createElement("nav",{className:"ln-o-grid__item ln-u-soft-top"},a.a.createElement("h2",{className:"ln-u-h3 ln-u-push-bottom"},r))};g.propTypes={header:i.a.string.isRequired};var h=g,b=(t(107),i.a.shape({formattedPromotionPrice:i.a.string,formattedValue:i.a.string,formattedWasPrice:i.a.string,formattedWasWasPrice:i.a.string})),v=i.a.shape({format:i.a.string.isRequired,url:i.a.string.isRequired}),P=i.a.shape({code:i.a.string.isRequired,url:i.a.string.isRequired,name:i.a.string.isRequired,images:i.a.arrayOf(v).isRequired,fromLabelRequired:i.a.string.isRequired,price:b}),w=i.a.shape({id:i.a.number.isRequired,refCode:i.a.string.isRequired,recommendedProduct:P}),R=i.a.shape({id:i.a.string.isRequired,header:i.a.string.isRequired,recommendations:i.a.arrayOf(w)}),O=(t(49),t(140),t(109),function(e){var r,t=e.code,n=e.url,o=e.images,i=e.name,c=e.formattedValue,u=e.formattedWasPrice,s=e.formattedWasWasPrice,l=e.formattedPromotionPrice,f=e.fromLabelRequired,m=e.recClick,d=!!u,p=!!s,y=l===c,g="ln-u-soft-right*1/4 ln-u-display-inline-block ".concat(c?"tu-u-color-red":""),h=(r="",l&&!y?r="tu-u-text-line-through ln-u-soft-right*1/4 ln-u-display-inline-block":(d||p)&&(r="tu-u-color-red ln-u-soft-right*1/4 ln-u-display-inline-block"),r),b="tu-u-text-line-through ln-u-soft-right*1/4 ln-u-display-inline-block",v=t.split("-")[0],P="y"===f.toLowerCase();return a.a.createElement("div",{className:"ln-o-grid__item ln-u-1/2 ln-u-1/4@sm ln-u-push-bottom","data-id":v},a.a.createElement("a",{href:n.replace("http:","https:"),className:"ln-u-text-decoration-normal ln-u-display-block",onClick:function(){return m()}},a.a.createElement("img",{src:o?o[0].url:"",className:"ln-u-1/1",alt:i,title:i}),a.a.createElement("span",null,a.a.createElement("span",{className:"ln-u-h5"},i),a.a.createElement("br",null),a.a.createElement("span",{className:"ln-u-h5 ln-u-font-weight-regular"},P&&a.a.createElement("span",{className:"ln-u-soft-right*1/4 ln-u-display-inline-block"},"From"),l&&!y&&a.a.createElement("span",{"test-id":"promotionPrice",className:g},l),a.a.createElement("span",{"test-id":"price",className:h},c),d&&y&&a.a.createElement("span",{"test-id":"wasPrice",className:b},u),p&&y&&a.a.createElement("span",{"test-id":"wasWasPrice",className:b},s)))))});O.propTypes={code:i.a.string.isRequired,url:i.a.string.isRequired,name:i.a.string.isRequired,images:i.a.arrayOf(i.a.shape({url:i.a.string.isRequired})).isRequired,formattedValue:i.a.string,recClick:i.a.func.isRequired,fromLabelRequired:i.a.string,formattedPromotionPrice:i.a.string,formattedWasPrice:i.a.string,formattedWasWasPrice:i.a.string},O.defaultProps={fromLabelRequired:"",formattedValue:"",formattedWasPrice:"",formattedWasWasPrice:"",formattedPromotionPrice:""};var j=O,k=function(e){var r=e.recommendations,t=e.onRecommendationClick;return a.a.createElement(a.a.Fragment,null,r.map((function(e){var r=e.id,n=e.recommendedProduct;return n.price&&a.a.createElement(j,{key:n.code,url:n.url,code:n.code,images:n.images.length?n.images.filter((function(e){return"thumbnail"===e.format})):null,name:n.name,fromLabelRequired:n.fromLabelRequired,formattedValue:n.price.formattedValue||null,formattedPromotionPrice:n.price.formattedPromotionPrice||null,formattedWasPrice:n.price.formattedWasPrice||null,formattedWasWasPrice:n.price.formattedWasWasPrice||null,recClick:function(){return t(r)}})})))};k.propTypes={recommendations:i.a.arrayOf(w).isRequired,onRecommendationClick:i.a.func.isRequired};var E=k,C=function(e){var r=e.category,t=r.id,n=r.header,o=r.recommendations,i=e.onRecommendationClick;return a.a.createElement("div",{className:"ln-o-grid",id:t},a.a.createElement(h,{header:n}),a.a.createElement(E,{recommendations:o,onRecommendationClick:i}))};C.propTypes={category:R.isRequired,onRecommendationClick:i.a.func.isRequired};var q=C,W=function(e){var r=e.categories,t=e.onRecommendationClick;return a.a.createElement(a.a.Fragment,null,r.filter((function(e){return e.recommendations.length>0})).map((function(e,r){return a.a.createElement(q,{key:"recommendations-category-".concat(r),category:e,onRecommendationClick:t})})))};W.propTypes={categories:i.a.arrayOf(R).isRequired,onRecommendationClick:i.a.func.isRequired};var S=W;function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function A(e,r,t,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void t(e)}c.done?r(u):Promise.resolve(u).then(n,a)}function N(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function D(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,r){return!r||"object"!==x(r)&&"function"!=typeof r?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):r}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,r){return(I=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var U=function(e){function r(e){var t;return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),(t=T(this,V(r).call(this,e))).getPeeriusAPIData=function(){var e,r,n=t.props.productCode,a=y(c);return!!n&&(window.PeeriusCallbacks=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?N(Object(t),!0).forEach((function(r){_(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},window.PeeriusCallbacks,{smartRecs:(e=regeneratorRuntime.mark((function e(r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return e.next=3,a.determineRecommendations(r);case 3:(n=e.sent)&&(t.setState({recommendationsCategories:n}),o=[],n.forEach((function(e){o.push.apply(o,L(e.recommendations.map((function(e){return e.id}))))})),t.sendPeeriusRecs(o));case 5:case"end":return e.stop()}}),e)})),r=function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function i(e){A(o,n,a,i,c,"next",e)}function c(e){A(o,n,a,i,c,"throw",e)}i(void 0)}))},function(e){return r.apply(this,arguments)})}),!0)},t.productLimit=function(e){return e.length>c.productLimit?e.slice(0,c.productLimit):e},t.sendPeeriusRecs=function(e){window.Peerius.sendAjax("".concat(c.sainsburysPeeriusURL).concat(e.join(",")))},t.sendPeeriusRecsClick=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";window.Peerius.smartRecsClick(e)},t.state={recommendationsCategories:[]},t}var t,n,o;return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&I(e,r)}(r,e),t=r,(n=[{key:"componentDidMount",value:function(){this.getPeeriusAPIData()}},{key:"render",value:function(){var e=this.state.recommendationsCategories;return a.a.createElement(S,{categories:e,onRecommendationClick:this.sendPeeriusRecsClick})}}])&&D(t.prototype,n),o&&D(t,o),r}(a.a.Component);U.propTypes={productCode:i.a.string.isRequired};r.default=U}}]);