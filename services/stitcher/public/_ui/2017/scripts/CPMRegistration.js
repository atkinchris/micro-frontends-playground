(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{315:function(e,t,n){"use strict";n(41),n(139),n(107),n(11),n(24),n(54);var a=n(30),r=n.n(a),i=n(58),o={$cpmGETURL:"/my-account/marketing-preferences-json",$cpmGuestGETURL:"/checkout/multi/payment-method/tu-marketing-preferences-json",$cpmRegisterGETURL:"/login/tu-marketing-preferences-json",getContainer:function(){return document.getElementById("CPM-account")},getPaymentContainer:function(){return document.getElementById("paymentDetails")},getIsCPM:function(){var e=this.getPaymentContainer();if(e){var t=e.dataset.iscpm;return JSON.parse(t)}return!1},getCSRF:function(){var e=this.getContainer();return!!e&&e.dataset.csrf},getCPMData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"$cpmGETURL",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,i){r.a.get(e[t],{params:n}).then((function(e){a(e.data)})).catch((function(){a(null)}))}))},sendCPMData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"$cpmGETURL",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,i){r.a.post(e[t],n,{params:{CSRFToken:o.getCSRF()}}).then((function(e){200===e.status&&a(!0)})).catch((function(e){i(!1)}))}))},createCPMObject:function(e){var t=i.a.marketingOptions.slice();return t.map((function(t){e.hasOwnProperty(t.name)&&(t.value=null===e[t.name]||0===e[t.name].length?null:e[t.name].toString())})),t}};t.a=o},319:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(2),o=n.n(i),c=(n(274),n(58)),u=function(){return r.a.createElement("p",null,"Don't worry, we'll never let other companies use your personal details for marketing. Read our ",r.a.createElement("a",{href:c.a.termsAndPrivacy.terms.link,className:"ln-u-text-decoration-underline"},c.a.termsAndPrivacy.terms.linkText)," and ",r.a.createElement("a",{href:c.a.termsAndPrivacy.privacy.link,className:"ln-u-text-decoration-underline"},c.a.termsAndPrivacy.privacy.linkText)," to learn more.")},l=function(e){var t=e.subheader,n=e.subheader2,a=e.label,i=e.cpmdata,o=e.cpminit,l=e.isCPMOn,s=void 0===l||l,m=e.setCPMData,p=s?t:"subheadernonCPM",f=s?a:"labelnonCPM",d=s?"contactPreferences":"contactPreferencesAny",h=""===o||null===o?"li":o,y="false"===o?"true":"false";return r.a.createElement("div",{className:"form_field-input ln-u-push-bottom"},r.a.createElement("h3",{className:"checkout-step-subtitle"},c.a.stayInTouch.header),r.a.createElement("p",null,c.a.stayInTouch[p]),""!==n&&!0===s&&r.a.createElement("p",null,c.a.stayInTouch[n]),!0===s&&r.a.createElement(u,null),r.a.createElement("div",{className:"ln-c-form-option ln-c-form-option--checkbox"},r.a.createElement("input",{id:c.a.stayInTouch.id,name:d,type:"checkbox",value:s?i:"true",className:"ln-c-form-option__input",onChange:function(e){var t=e.target.checked?y:h;s&&m(t)}}),r.a.createElement("label",{className:"ln-c-form-option__label",htmlFor:c.a.stayInTouch.id},c.a.stayInTouch[f]),!0===s&&r.a.createElement("input",{type:"hidden",name:"contactPreferencesAny",value:i})))};l.propTypes={subheader:o.a.string.isRequired,subheader2:o.a.string.isRequired,label:o.a.string.isRequired,cpmdata:o.a.string.isRequired,cpminit:o.a.string.isRequired,isCPMOn:o.a.bool,setCPMData:o.a.func.isRequired};t.a=l},331:function(e,t,n){"use strict";n.r(t);n(12),n(53),n(56),n(44),n(85),n(86),n(11),n(54),n(57),n(48);var a=n(0),r=n.n(a),i=(n(2),n(315)),o=n(141),c=n(319),u=n(90);n(30);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=m(this,p(t).call(this,e))).registerEmailNode=null,n.handleEmailChange=function(e){n.registerEmail(e.target.value)},n.registerEmail=function(e){Object(o.a)(e,u.a.regexPatterns.email)&&i.a.getCPMData("$cpmRegisterGETURL",{email:e}).then((function(e){null!==e&&n.setState((function(t){return{cpmdataupdated:!0,cpminit:e.toString(),cpmdata:null===e||0===e.length?"li":e.toString()}}))}))},n.state={cpmdataupdated:!1,cpminit:null,cpmdata:null},n}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=document.getElementById("register_email");if(e){var t=e.value;t&&this.registerEmail(t),e.addEventListener("blur",this.handleEmailChange,!0),this.registerEmailNode=e}}},{key:"componentWillUnmount",value:function(){var e=this.registerEmailNode;e&&e.removeEventListener("blur",this.handleEmailChange,!0)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,"true"!==this.state.cpminit&&"li"!==this.state.cpminit&&!0===this.state.cpmdataupdated&&r.a.createElement(c.a,{cpmdata:this.state.cpmdata,cpminit:this.state.cpminit,subheader:"false"===this.state.cpminit?"subheader":"subheaderunknown",subheader2:"false"===this.state.cpminit?"subheader2":"subheader2unknown",label:"false"===this.state.cpminit?"label":"labelunknown",setCPMData:function(t){e.setState((function(e){return{cpmdata:t}}))}}))}}])&&s(n.prototype,a),l&&s(n,l),t}(r.a.Component);t.default=d}}]);